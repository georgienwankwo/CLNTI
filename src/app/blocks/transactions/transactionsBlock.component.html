<section class="mt-4">
  @if (!hideTitle) {
    <div class="mb-4">
      <p class="text-md font-medium text-gray-600">Transactions</p>
    </div>
  }
  <div class="border border-gray-200 rounded-lg overflow-hidden relative">
    @if (isLoading()) {
      <div class="absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center z-10">
        <p class="text-sm font-medium text-gray-600">Loading...</p>
      </div>
    }
    <div class="overflow-x-auto h-full">
      @if (count === 0 && !isLoading()) {
        <div
          class="py-12 text-center text-gray-500 text-sm flex flex-col items-center justify-center gap-2 min-h-[300px]"
        >
          <i class="ph ph-empty mb-2 text-2xl"></i>
          <p class="text-sm xl:text-lg">No transactions available yet</p>
        </div>
      } @else {
        <ion-grid class="min-w-[775px] bg-gray-50 font-semibold text-gray-600 text-sm">
          <ion-row class="border-b border-gray-200 whitespace-nowrap">
            <ion-col class="py-6 px-4 min-w-[155px]">Transaction ID</ion-col>
            <ion-col class="py-6 px-4 min-w-[155px]">Type</ion-col>
            <ion-col class="py-6 px-4 min-w-[155px]">Status</ion-col>
            <ion-col class="py-6 px-4 min-w-[155px]">Amount</ion-col>
            <ion-col class="py-6 px-4 min-w-[155px]">Date</ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid class="min-w-[775px] text-sm text-gray-700">
          @for (txn of transactions; track txn.id) {
            <ion-row class="border-b border-gray-200 hover:bg-gray-50 transition whitespace-nowrap">
              <ion-col class="min-w-[155px] py-6 px-4 font-mono text-gray-800">
                {{ txn.id }}
              </ion-col>
              <ion-col class="min-w-[155px] py-6 px-4">
                {{ txn.type }}
              </ion-col>
              <ion-col class="min-w-[155px] py-6 px-4">
                <span
                  [ngClass]="{
                    'bg-green-100 text-green-700': txn.status === 'Successful',
                    'bg-yellow-100 text-yellow-700': txn.status === 'Pending',
                    'bg-red-100 text-red-700': txn.status === 'Failed',
                  }"
                  class="px-2 py-1 text-xs rounded-full font-medium"
                >
                  {{ txn.status }}
                </span>
              </ion-col>
              <ion-col class="min-w-[155px] py-6 px-4 font-medium text-gray-900">
                â‚¦{{ txn.amount | number }}
              </ion-col>
              <ion-col class="min-w-[155px] py-6 px-4">
                {{ txn.date }}
              </ion-col>
            </ion-row>
          }
        </ion-grid>
        <!-- Pagination Controls -->
        <div
          class="flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6"
        >
          <div class="flex justify-between flex-1 sm:hidden">
            <ion-button
              (click)="prevPage()"
              [disabled]="currentPage === 1"
              fill="outline"
              size="small"
              >Previous</ion-button
            >
            <ion-button
              (click)="nextPage()"
              [disabled]="currentPage === totalPages"
              fill="outline"
              size="small"
              >Next</ion-button
            >
          </div>
          <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
            <div>
              <p class="text-sm text-gray-700 font-medium">
                Page {{ currentPage }} of {{ totalPages }} ({{ count }} total)
              </p>
            </div>
            <div>
              <nav
                class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px"
                aria-label="Pagination"
              >
                <ion-button
                  (click)="prevPage()"
                  [disabled]="currentPage === 1"
                  fill="clear"
                  size="small"
                >
                  <ion-icon name="chevron-back-outline"></ion-icon>
                  Previous
                </ion-button>
                <ion-button
                  (click)="nextPage()"
                  [disabled]="currentPage === totalPages"
                  fill="clear"
                  size="small"
                >
                  Next
                  <ion-icon name="chevron-forward-outline"></ion-icon>
                </ion-button>
              </nav>
            </div>
          </div>
        </div>
      }
    </div>
  </div>
</section>
